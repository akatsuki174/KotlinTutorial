/**
 * Created by akatsuki174 on 2017/04/23.
 */

/**
 * ã“ã®ä¾‹ã§ã¯åˆ†è§£å®£è¨€ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ç´¹ä»‹ã™ã‚‹ã€‚
 * åˆ†è§£å®£è¨€ã‚’ã™ã‚‹ã¨ä¸€åº¦ã«è¤‡æ•°ã®å¤‰æ•°ã‚’ä½œæˆã§ãã‚‹ã€‚
 * å¿…è¦ãªæ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ã‚’å‘¼ã³å‡ºã›ã‚Œã°ã€åˆ†è§£å®£è¨€ã®å³å´ã«ã¯ä½•ã§ã‚‚ç½®ã‘ã‚‹ã€‚
 * å‚è€ƒãƒªãƒ³ã‚¯ï¼šhttp://kotlinlang.org/docs/reference/multi-declarations.html#multi-declarations
 */
fun destructuringDeclarations() {
    val pair = Pair(1, "one")
    val (num, name) = pair
    // ã“ã®ã‚ˆã†ã«ã—ã¦å—ã‘å–ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
    //val num = pair.component1()
    //val name = pair.component2()
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§toString()ãŒä½¿ãˆã‚‹
    //println(pair.toString())

    // ãã‚Œãã‚Œç‹¬ç«‹ã§ä½¿ã†ã“ã¨ãŒã§ãã‚‹
    println("num = $num, name = $name")
}

// 2ã¤ã®ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã‚’è¡¨ã™ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹
class Pair<K, V>(val first: K, val second: V) {
    // å¤šé‡å®£è¨€ã§è¤‡æ•°ã®å€¤ã‚’è¿”ã™ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«component*()ã‚’ç”¨æ„ã—ã¦ã„ã‚‹
    // ï¼ˆ*ã®éƒ¨åˆ†ã¯ä»»æ„ã®æ•´æ•°ï¼‰
    // operator : æ¼”ç®—å­ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’ã—ãŸã„ã¨ãã«ä½¿ã†
    operator fun component1(): K {
        return first
    }

    operator fun component2(): V {
        return second
    }
}

/**
 *  ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã«ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚
 *  ãƒ—ãƒ©ã‚¤ãƒãƒªã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§å®£è¨€ã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å–å¾—ã§ããŸã‚Šã€
 *  toString(), equals(), hashCode(), copy()ãŒå®¹æ˜“ã•ã‚Œã¦ã„ãŸã‚Šã—ã¾ã™ã€‚
 *  å‚è€ƒãƒªãƒ³ã‚¯ï¼šhttp://kotlinlang.org/docs/reference/data-classes.html#data-classes
 */
data class User(val name: String, val id: Int)

fun getUser(): User {
    return User("Alex", 1)
}

fun dataClasses() {
    val user = getUser()
    println("name = ${user.name}, id = ${user.id}")
    // or
    val (name, id) = getUser() // åˆ†è§£å®£è¨€
    println("name = $name, id = $id")
    // or
    // ãƒ—ãƒ©ã‚¤ãƒãƒªã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§å®£è¨€ã—ãŸé †ç•ªã§
    // componenté–¢æ•°ã‚’ä½¿ã£ã¦å‘¼ã¶ã“ã¨ãŒã§ãã‚‹
    println("name = ${getUser().component1()}, id = ${getUser().component2()}")

    // ç‰¹ã«å®šç¾©ã—ãªãã¦ã‚‚toStringé–¢æ•°ãŒä½¿ãˆã‚‹
    println(user.toString())

    // ç‰¹ã«å®šç¾©ã—ãªãã¦ã‚‚hashCodeé–¢æ•°ãŒä½¿ãˆã‚‹
    println(user.hashCode())

    // ç‰¹ã«å®šç¾©ã—ãªãã¦ã‚‚equalsé–¢æ•°ãŒä½¿ãˆã‚‹
    val otherUser = User("Tom", 2)
    println(user.equals(otherUser))

    // ç‰¹ã«å®šç¾©ã—ãªãã¦ã‚‚copyé–¢æ•°ãŒä½¿ãˆã‚‹
    val copyUser = user.copy("Jim", 3)
    println("name = ${copyUser.name}, id = ${copyUser.id}")
}

/**
 *  mapã«ã¤ã„ã¦ã®ç”¨ä¾‹
 *  å‚è€ƒãƒªãƒ³ã‚¯ï¼šhttps://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html
 */
fun traversingAMap() {
    val map = hashMapOf<String, Int>()
    map.put("one", 1)
    map.put("two", 2)
    // ã“ã®ã‚ˆã†ã«åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
    //val map2 = hashMapOf("ä¸€" to 1, "äºŒ" to 2)
    //println("value = ${map2.get("ä¸€")}")

    // Javaã«ã‚‚ã‚ã£ãŸã‚ˆã†ã«LinkedHashMap,SortedMapãŒä½¿ãˆã‚‹
    //val linkedMap = linkedMapOf("mikan" to "ğŸŠ", "apple" to "ğŸ")
    //val sortedMapOf = sortedMapOf("mikan" to "ğŸŠ", "apple" to "ğŸ")

    for ((key, value) in map) {
        println("key = $key, value = $value")
    }

    // åˆ¥ã®æ–¹æ³•ã§valueã‚’å–ã‚Šå‡ºã™ã“ã¨ã‚‚ã§ãã‚‹
    println("value = ${map.get("one")}")
    println("value = ${map["two"]}")
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã¯toString(), equals(), hashCode(), copy()ãŒè‡ªå‹•ã§ä½œã‚‰ã‚Œã¾ã™ã€‚
 * å‚è€ƒãƒªãƒ³ã‚¯ï¼šhttp://kotlinlang.org/docs/reference/data-classes.html#data-classes
 */
fun autogeneratedFunctions() {
    val user = User("Alex", 1)
    println(user) // toString()

    val secondUser = User("Alex", 1)
    val thirdUser = User("Max", 2)

    println("user == secondUser: ${user == secondUser}")
    println("user == thirdUser: ${user == thirdUser}")

    // copy() function
    println(user.copy())            // User(name=Alex, id=1)
    println(user.copy("Max"))       // User(name=Max, id=1)  user.copy(name = "Max")ã¨åŒç¾©
    println(user.copy(id = 2))      // User(name=Alex, id=2)
    println(user.copy("Max", 2))    // User(name=Max, id=2)
}

